<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Registration - XmasSciRMUTP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="/css/style.css">

    <style>
        body {
            background: url('https://cdn.pixabay.com/photo/2017/11/20/07/40/christmas-2962439_1280.jpg') no-repeat center center fixed;
            background-size: cover;
            overflow-x: hidden;
        }

        .christmas-theme {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 2px solid #e63946;
            background: rgba(255, 255, 255, 0.9);
        }

        .title {
            color: #e63946;
            font-family: 'Cookie', cursive;
        }

        .snow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        footer {
            background: linear-gradient(to top, #ffffff, #e0f7fa);
            padding: 1rem;
            text-align: center;
            position: relative;
            bottom: 0;
            width: 100%;
        }

        .snow-container {
            position: relative;
            height: 150px;
        }

        .snow-container img {
            position: absolute;
            bottom: 0;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cookie&display=swap" rel="stylesheet">
</head>

<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center relative">
    <canvas class="snow"></canvas>

    <div class="christmas-theme p-8 rounded-lg max-w-md w-full">
        <h1 class="title text-4xl font-bold text-center mb-6">üéÑXmasSciRMUTPüéÑ</h1>
        <form id="registrationForm">
            <div class="mb-4">
                <label for="fullname" class="block text-gray-700 font-medium">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</label>
                <input type="text" id="fullname" name="fullname"
                    class="mt-1 block w-full p-2 border rounded-lg focus:ring-red-500 focus:border-red-500" required>
            </div>
            <div class="mb-4">
                <label for="major" class="block text-gray-700 font-medium">‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
                <select id="major" name="major"
                    class="mt-1 block w-full p-2 border rounded-lg focus:ring-red-500 focus:border-red-500" required>
                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤</option>
                    <option value="‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</option>
                    <option value="‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°">‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°</option>
                    <option value="‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°">‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°</option>
                    <option value="‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</option>
                    <option value="‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏≠‡∏≤‡∏á">‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏≠‡∏≤‡∏á</option>
                    <option value="‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</option>
                </select>
            </div>
            <button type="submit" class="bg-red-500 text-white py-2 px-4 rounded-lg w-full">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
        </form>
        <div id="pointsSection" class="mt-6 hidden">
            <button id="collectPoints" class="bg-green-500 text-white py-2 px-4 rounded-lg w-full">‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°</button>
        </div>
        <br><br>
        <center>
            <a class="bg-blue-500 text-white py-2 px-4 rounded-lg w-full ml-8 mr-8" href="/index.html">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
        </center>
        
    </div>

    

    <p class="text-sm text-gray-600 mt-12">2024 ¬© ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢ : ‡∏ò‡∏µ‡∏£‡∏ä‡∏≤‡∏ô‡∏ô‡∏ó‡πå ‡∏û‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô</p>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js';
        import { getFirestore, addDoc, collection } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js';

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBskXtybhc67-hAXjQYcsXojF8btsGKY8M",
            authDomain: "xmas-sci-rmutp-register.firebaseapp.com",
            projectId: "xmas-sci-rmutp-register",
            storageBucket: "xmas-sci-rmutp-register.appspot.com",
            messagingSenderId: "379187167144",
            appId: "1:379187167144:web:ac8df710a03cd36c54e79d",
            measurementId: "G-E2932MCZG5"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const registrationForm = document.getElementById('registrationForm');
        const pointsSection = document.getElementById('pointsSection');
        const collectPoints = document.getElementById('collectPoints');

        registrationForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const fullname = document.getElementById('fullname').value;
            const major = document.getElementById('major').value;

            try {
                // Save to Firestore
                await addDoc(collection(db, "registrations"), {
                    fullname: fullname,
                    major: major,
                    timestamp: new Date()
                });

                Swal.fire('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
                pointsSection.classList.remove('hidden');
            } catch (error) {
                console.error("Error adding document: ", error);
                Swal.fire('‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î!', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ', 'error');
            }
        });

        collectPoints.addEventListener('click', () => {
            Swal.fire({
                title: '‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô!',
                text: '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß!',
                icon: 'info',
                showCancelButton: true, // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á',
                cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
            }).then((result) => {
                if (result.isConfirmed) {
                    // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ï‡∏Å‡∏•‡∏á" ‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
                    window.location.href = 'https://u.lin.ee/s3yxcby'; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
                }
            });

            collectPoints.classList.add('hidden');
        });


        function createSnow() {
            const canvas = document.querySelector('.snow');
            const ctx = canvas.getContext('2d');
            const width = canvas.width = window.innerWidth;
            const height = canvas.height = window.innerHeight;
            const particles = [];

            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    r: Math.random() * 4 + 1,
                    d: Math.random() * 50
                });
            }

            function draw() {
                ctx.clearRect(0, 0, width, height);
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.beginPath();
                for (let i = 0; i < particles.length; i++) {
                    const p = particles[i];
                    ctx.moveTo(p.x, p.y);
                    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2, true);
                }
                ctx.fill();
                update();
            }

            function update() {
                for (let i = 0; i < particles.length; i++) {
                    const p = particles[i];
                    p.y += Math.cos(p.d) + 1 + p.r / 2;
                    p.x += Math.sin(p.d);

                    if (p.x > width + 5 || p.x < -5 || p.y > height) {
                        particles[i] = { x: Math.random() * width, y: -10, r: p.r, d: p.d };
                    }
                }
            }

            setInterval(draw, 33);
        }

        createSnow();
    </script>
</body>

</html>